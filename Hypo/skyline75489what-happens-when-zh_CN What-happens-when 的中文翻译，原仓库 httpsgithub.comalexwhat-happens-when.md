---
doc_type: hypothesis-highlights
url: 'https://github.com/skyline75489/what-happens-when-zh_CN'
---

# skyline75489/what-happens-when-zh_CN: What-happens-when 的中文翻译，原仓库 https://github.com/alex/what-happens-when

## Metadata
- Author: [github.com]()
- Title: skyline75489/what-happens-when-zh_CN: What-happens-when 的中文翻译，原仓库 https://github.com/alex/what-happens-when
- Reference: https://github.com/skyline75489/what-happens-when-zh_CN
- Category: #article

## Page Notes
## Highlights
- 解析URL — [Updated on 2022-02-27 14:59:58](https://hyp.is/4B2YqJeaEeypO6sKy68o7g/github.com/skyline75489/what-happens-when-zh_CN) — Group: #self-notation

- DNS 查询 — [Updated on 2022-02-27 15:00:00](https://hyp.is/4aobVpeaEeyz0RMzhoLoyw/github.com/skyline75489/what-happens-when-zh_CN) — Group: #self-notation

- 浏览器检查域名是否在缓存当中 — [Updated on 2022-02-27 15:00:03](https://hyp.is/4yzxOJeaEey5R_fQ6vbU0g/github.com/skyline75489/what-happens-when-zh_CN) — Group: #self-notation

- 本地 Hosts 里 — [Updated on 2022-02-27 15:00:10](https://hyp.is/57KJ6JeaEey0AKsBpplSRA/github.com/skyline75489/what-happens-when-zh_CN) — Group: #self-notation

-  DNS 服务器发送一条 DNS 查询请求 — [Updated on 2022-02-27 15:00:37](https://hyp.is/974s8peaEey6WDuA8C9GXg/github.com/skyline75489/what-happens-when-zh_CN) — Group: #self-notation

- 本地路由器或者 ISP 的缓存 DNS 服务器 — [Updated on 2022-02-27 15:00:45](https://hyp.is/_BlW-peaEeyYmacivRQnnA/github.com/skyline75489/what-happens-when-zh_CN) — Group: #self-notation

- 查询本地 DNS 服务器 — [Updated on 2022-02-27 15:00:49](https://hyp.is/_tB6XpeaEey4EhuwYiTRyQ/github.com/skyline75489/what-happens-when-zh_CN) — Group: #self-notation

-  DNS 服务器和我们的主机在同一个子网内 — [Updated on 2022-02-27 15:00:58](https://hyp.is/A-SxzJebEeyzOr9Ai3O6Dg/github.com/skyline75489/what-happens-when-zh_CN) — Group: #self-notation

- DNS 服务器和我们的主机在不同的子网 — [Updated on 2022-02-27 15:01:03](https://hyp.is/B0y0zJebEey6cIO4-c-O_A/github.com/skyline75489/what-happens-when-zh_CN) — Group: #self-notation

- ARP 过程对默认网关进行查询 — [Updated on 2022-02-27 15:01:09](https://hyp.is/CseylpebEey3zXM_G5hLLg/github.com/skyline75489/what-happens-when-zh_CN) — Group: #self-notation

- ARP 过程对 DNS 服务器进行 ARP查询 — [Updated on 2022-02-27 15:01:11](https://hyp.is/DA2gepebEey5PRvsQXJM0w/github.com/skyline75489/what-happens-when-zh_CN) — Group: #self-notation

- 首先查询 ARP 缓存，如果缓存命中，我们返回结果：目标 IP = MAC — [Updated on 2022-02-27 15:01:22](https://hyp.is/Ei1A8JebEeyawvu_7eOxQA/github.com/skyline75489/what-happens-when-zh_CN) — Group: #self-notation

- 如果缓存没有命中： — [Updated on 2022-02-27 15:02:30](https://hyp.is/OtkhzJebEeylH4uyb80HUQ/github.com/skyline75489/what-happens-when-zh_CN) — Group: #self-notation

- 是的话，使用跟那个子网相连的接口，否则使用与默认网关相连的接口。 — [Updated on 2022-02-27 15:02:45](https://hyp.is/RBkg6JebEey4E8c0Gkq_5g/github.com/skyline75489/what-happens-when-zh_CN) — Group: #self-notation

- 网络接口的 MAC 地址 — [Updated on 2022-02-27 15:02:48](https://hyp.is/RainnpebEeyj4O-f3PQD3g/github.com/skyline75489/what-happens-when-zh_CN) — Group: #self-notation

- 二层（ OSI 模型 中的数据链路层）ARP 请求 — [Updated on 2022-02-27 15:02:52](https://hyp.is/R_S2vpebEey-BPvrwG7dbQ/github.com/skyline75489/what-happens-when-zh_CN) — Group: #self-notation

- 路由器是直接连接的，路由器会返回一个 ARP Reply — [Updated on 2022-02-27 15:03:03](https://hyp.is/TtuuVpebEeyeiM-Ky9Qwww/github.com/skyline75489/what-happens-when-zh_CN) — Group: #self-notation

- 集线器，集线器会把 ARP 请求向所有其它端口广播 — [Updated on 2022-02-27 15:03:07](https://hyp.is/UL_DkpebEeye3Mev0vCdHw/github.com/skyline75489/what-happens-when-zh_CN) — Group: #self-notation

-  DNS 服务器或者默认网关的 IP 地址 — [Updated on 2022-02-27 15:03:38](https://hyp.is/Y4kOFpebEey2VTMhYciJ-A/github.com/skyline75489/what-happens-when-zh_CN) — Group: #self-notation

- 53 端口向 DNS 服务器发送 UDP 请求包，如果响应包太大，会使用 TCP 协议 — [Updated on 2022-02-27 15:04:24](https://hyp.is/fstIzpebEeywj6-L4v-ZPw/github.com/skyline75489/what-happens-when-zh_CN) — Group: #self-notation

- 本地/ISP DNS 服务器没有找到结果 — [Updated on 2022-02-27 15:04:31](https://hyp.is/g0_E7JebEeywkIcgpKuypg/github.com/skyline75489/what-happens-when-zh_CN) — Group: #self-notation

- 一层一层向高层 DNS 服务器做查询 — [Updated on 2022-02-27 15:04:36](https://hyp.is/hiqUHJebEeyj4hvDdcyGTw/github.com/skyline75489/what-happens-when-zh_CN) — Group: #self-notation

- http 协议默认端口号是 80， https 默认端口号是 443 — [Updated on 2022-02-27 15:04:55](https://hyp.is/kVh1rJebEeyYm8tNnPotNA/github.com/skyline75489/what-happens-when-zh_CN) — Group: #self-notation

- 在传输层请求被封装成 TCP segment。目标端口会被加入头部，源端口会在系统内核的动态端口范围内选取 — [Updated on 2022-02-27 15:05:15](https://hyp.is/nXjtOpebEey04p9Hvb1T0w/github.com/skyline75489/what-happens-when-zh_CN) — Group: #self-notation

- TCP segment 被送往网络层 — [Updated on 2022-02-27 15:05:18](https://hyp.is/nzU0gJebEey5Sr_gZXTX5w/github.com/skyline75489/what-happens-when-zh_CN) — Group: #self-notation

- 入一个 IP 头部 — [Updated on 2022-02-27 15:05:20](https://hyp.is/oDEJ1pebEey2VkvX5g-QQQ/github.com/skyline75489/what-happens-when-zh_CN) — Group: #self-notation

- 目标服务器的IP地址以及本机的IP地址，把它封装成一个IP packet — [Updated on 2022-02-27 15:05:29](https://hyp.is/pVRvNJebEeyHbgfzSYFGkA/github.com/skyline75489/what-happens-when-zh_CN) — Group: #self-notation

- ，链路层会在封包中加入 frame 头部，里面包含了本地内置网卡的MAC地址以及网关（本地路由器）的 MAC 地址 — [Updated on 2022-02-27 15:05:45](https://hyp.is/r1IytJebEey5OwvZY8kO-w/github.com/skyline75489/what-happens-when-zh_CN) — Group: #self-notation

- 如果内核不知道网关的 MAC 地址，它必须进行 ARP 广播来查询其地址。 — [Updated on 2022-02-27 15:05:54](https://hyp.is/tHoV1pebEeyaxKd1y40Q2g/github.com/skyline75489/what-happens-when-zh_CN) — Group: #self-notation

- ARP（地址解析协议）广播 — [Updated on 2022-02-27 15:06:45](https://hyp.is/dZ8T_JebEey4Fb-MgxqOJQ/github.com/skyline75489/what-happens-when-zh_CN) — Group: #self-notation
    - Annotation: ARP协议，通过ip地址来获取其Mac地址。只有拥有mac地址，才能向其发送数据链路层的包。
- 封包会从本地计算机出发，经过本地网络，再通过调制解调器把数字信号转换成模拟信号，使其适于在电话线路 — [Updated on 2022-02-27 15:07:10](https://hyp.is/4ga0MpebEey60OOy2WAnQw/github.com/skyline75489/what-happens-when-zh_CN) — Group: #self-notation

- 在传输线路的另一端，是另外一个调制解调器，它把模拟信号转换回数字信号，交由下一个 网络节点 处理 — [Updated on 2022-02-27 15:07:19](https://hyp.is/5ucXxpebEeyqdIfPf5uD_w/github.com/skyline75489/what-happens-when-zh_CN) — Group: #self-notation

- 光纤或直接以太网连接，这种情况下信号一直是数字的 — [Updated on 2022-02-27 15:07:25](https://hyp.is/6ob33pebEey2WYsoR1gWXA/github.com/skyline75489/what-happens-when-zh_CN) — Group: #self-notation

- 自治区域 — [Updated on 2022-02-27 15:07:35](https://hyp.is/8MtteJebEeyoKssbPtsGFw/github.com/skyline75489/what-happens-when-zh_CN) — Group: #self-notation

- 边界路由器，其他自治区域，最终到达目标服务器 — [Updated on 2022-02-27 15:07:39](https://hyp.is/81bbVJebEeyfY998gSumrA/github.com/skyline75489/what-happens-when-zh_CN) — Group: #self-notation

- 路由器会从IP数据报头部里提取出目标地址，并将封包正确地路由到下一个目的地 — [Updated on 2022-02-27 15:07:56](https://hyp.is/_UDe0JebEeyrt_-nJK1eSQ/github.com/skyline75489/what-happens-when-zh_CN) — Group: #self-notation

- time to live (TTL) 域的值每经过一个路由器就减1，如果封包的TTL变为0 — [Updated on 2022-02-27 15:08:13](https://hyp.is/BxO8IJecEeyvom9YTgg1Bg/github.com/skyline75489/what-happens-when-zh_CN) — Group: #self-notation

- 初始序列号(ISN)，将设置了 SYN 位的封包发送给服务器端，表明自己要建立连接并设置了初始序列号 — [Updated on 2022-02-27 15:08:35](https://hyp.is/FKzAmJecEeyPQhfXHNkY8Q/github.com/skyline75489/what-happens-when-zh_CN) — Group: #self-notation

- 选择它自己的初始序列号 — [Updated on 2022-02-27 15:08:52](https://hyp.is/Hq1QxpecEey_u1PeQ3p2Tg/github.com/skyline75489/what-happens-when-zh_CN) — Group: #self-notation

- 设置 SYN 位，表明自己选择了一个初始序列号 — [Updated on 2022-02-27 15:08:55](https://hyp.is/IG2S9JecEey1BYNnSlmsJQ/github.com/skyline75489/what-happens-when-zh_CN) — Group: #self-notation

- 把 (客户端ISN + 1) 复制到 ACK 域，并且设置 ACK 位，表明自己接收到了客户端的第一个封包 — [Updated on 2022-02-27 15:09:03](https://hyp.is/JU3N1JecEey5PwtA7KGS2g/github.com/skyline75489/what-happens-when-zh_CN) — Group: #self-notation

- 自己的序列号+1 — [Updated on 2022-02-27 15:09:07](https://hyp.is/J2tj4pecEeyzwG9Gz-vERQ/github.com/skyline75489/what-happens-when-zh_CN) — Group: #self-notation

- 接收端 ACK+1 — [Updated on 2022-02-27 15:09:08](https://hyp.is/KFEQcpecEeyl-w_gFWoWwQ/github.com/skyline75489/what-happens-when-zh_CN) — Group: #self-notation

- 设置 ACK 位 — [Updated on 2022-02-27 15:09:10](https://hyp.is/KSwHuJecEeyuHC8fdmksNw/github.com/skyline75489/what-happens-when-zh_CN) — Group: #self-notation

- 确认接收到这个数据包（或者一系列数据包）之后，它发送一个 ACK 包，ACK 的值设置为接收到的数据包的最后一个序列号 — [Updated on 2022-02-27 15:09:33](https://hyp.is/NxU30pecEeyqdv_l9_M8YA/github.com/skyline75489/what-happens-when-zh_CN) — Group: #self-notation

- 发送了N个 Bytes 的数据之后，将自己的 SEQ 序列号也增加N — [Updated on 2022-02-27 15:09:36](https://hyp.is/OM9HPpecEeyo8outEIewWQ/github.com/skyline75489/what-happens-when-zh_CN) — Group: #self-notation

- 关闭连接的一方发送一个 FIN 包 — [Updated on 2022-02-27 15:09:45](https://hyp.is/PeWiaJecEey3U39OYvKlXA/github.com/skyline75489/what-happens-when-zh_CN) — Group: #self-notation

- 确认这个 FIN 包，并且发送自己的 FIN 包 — [Updated on 2022-02-27 15:09:47](https://hyp.is/PzLIgJecEeyj5Sc1oQMo8g/github.com/skyline75489/what-happens-when-zh_CN) — Group: #self-notation

- 关闭的一方使用 ACK 包来确认接收到了 FIN — [Updated on 2022-02-27 15:09:50](https://hyp.is/QSS3ZpecEey60RfNqJkhww/github.com/skyline75489/what-happens-when-zh_CN) — Group: #self-notation





